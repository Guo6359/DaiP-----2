<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>天气背景测试</title>
    <style>
        /* 复制完整的天气背景样式 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .chat-main {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.5s ease;
            padding: 20px;
        }

        /* 天气背景样式 - 与项目中完全一致 */
        body.weather-sunny .chat-main {
            background: linear-gradient(135deg, #ffeb3b, #ffc107) !important;
            transition: background 0.5s ease;
        }

        body.weather-cloudy .chat-main {
            background: linear-gradient(135deg, #90caf9, #64b5f6) !important;
            transition: background 0.5s ease;
        }

        body.weather-rainy .chat-main {
            background: linear-gradient(135deg, #1a237e, #303f9f) !important;
            transition: background 0.5s ease;
        }

        body.weather-snowy .chat-main {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2) !important;
            transition: background 0.5s ease;
        }

        body.weather-foggy .chat-main {
            background: linear-gradient(135deg, #cfd8dc, #90a4ae) !important;
            transition: background 0.5s ease;
        }

        body.weather-stormy .chat-main {
            background: linear-gradient(135deg, #37474f, #263238) !important;
            transition: background 0.5s ease;
        }

        /* 测试控制样式 */
        .test-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
        }

        .test-controls h3 {
            margin-top: 0;
            margin-bottom: 15px;
        }

        .weather-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .weather-btn {
            padding: 10px;
            border: none;
            border-radius: 4px;
            background: #3498db;
            color: white;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .weather-btn:hover {
            background: #2980b9;
        }

        .clear-btn {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 4px;
            background: #e74c3c;
            color: white;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .clear-btn:hover {
            background: #c0392b;
        }

        .debug-info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            font-family: monospace;
            font-size: 12px;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div class="chat-main">
        <h1>天气背景测试页面</h1>
        <p>点击右侧按钮测试不同天气背景效果</p>
    </div>

    <div class="test-controls">
        <h3>选择天气类型</h3>
        <div class="weather-buttons">
            <button class="weather-btn" onclick="setWeatherBackground('晴')">晴</button>
            <button class="weather-btn" onclick="setWeatherBackground('多云')">多云</button>
            <button class="weather-btn" onclick="setWeatherBackground('阴')">阴</button>
            <button class="weather-btn" onclick="setWeatherBackground('小雨')">小雨</button>
            <button class="weather-btn" onclick="setWeatherBackground('雪')">雪</button>
            <button class="weather-btn" onclick="setWeatherBackground('雾')">雾</button>
            <button class="weather-btn" onclick="setWeatherBackground('霾')">霾</button>
            <button class="weather-btn" onclick="setWeatherBackground('雷阵雨')">雷阵雨</button>
        </div>
        <button class="clear-btn" onclick="clearWeatherBackground()">清除天气背景</button>
    </div>

    <div class="debug-info">
        <strong>调试信息：</strong><br>
        <div id="body-classes">当前body类：</div>
        <div id="computed-bg">计算背景：</div>
        <div id="weather-type">当前天气：</div>
    </div>

    <script>
        // 与项目中相同的setWeatherBackground函数
        function setWeatherBackground(weatherType) {
            console.log('Setting weather background for:', weatherType);
            
            const body = document.body;
            let newClass = '';
            
            // 映射天气类型到对应的CSS类
            switch(weatherType) {
                case '晴':
                    newClass = 'weather-sunny';
                    break;
                case '多云':
                case '阴':
                    newClass = 'weather-cloudy';
                    break;
                case '小雨':
                case '中雨':
                case '大雨':
                case '暴雨':
                    newClass = 'weather-rainy';
                    break;
                case '雪':
                case '小雪':
                case '中雪':
                case '大雪':
                    newClass = 'weather-snowy';
                    break;
                case '雾':
                case '霾':
                    newClass = 'weather-foggy';
                    break;
                case '雷阵雨':
                    newClass = 'weather-stormy';
                    break;
                default:
                    // 默认背景 - 不设置新类
                    break;
            }
            
            console.log('New weather class:', newClass);
            
            // 移除所有天气相关类
            const weatherClasses = ['weather-sunny', 'weather-cloudy', 'weather-rainy', 'weather-snowy', 'weather-foggy', 'weather-stormy'];
            weatherClasses.forEach(cls => {
                body.classList.remove(cls);
            });
            
            // 添加新的天气背景类
            if (newClass) {
                body.classList.add(newClass);
                console.log('Added class:', newClass);
            }
            
            updateDebugInfo(weatherType);
        }

        function clearWeatherBackground() {
            const body = document.body;
            const weatherClasses = ['weather-sunny', 'weather-cloudy', 'weather-rainy', 'weather-snowy', 'weather-foggy', 'weather-stormy'];
            weatherClasses.forEach(cls => {
                body.classList.remove(cls);
            });
            updateDebugInfo('无');
        }

        function updateDebugInfo(weatherType) {
            const body = document.body;
            const chatMain = document.querySelector('.chat-main');
            const computedBg = window.getComputedStyle(chatMain).background;
            
            document.getElementById('body-classes').textContent = `当前body类：${body.className}`;
            document.getElementById('computed-bg').textContent = `计算背景：${computedBg}`;
            document.getElementById('weather-type').textContent = `当前天气：${weatherType}`;
        }

        // 初始化调试信息
        window.addEventListener('load', function() {
            updateDebugInfo('无');
        });
    </script>
</body>
</html>